(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],[,,,,,function(e,t,a){e.exports=a.p+"static/media/drone.60d00ff5.png"},function(e,t,a){e.exports=a.p+"static/media/stars.edfe7c37.png"},function(e,t,a){e.exports=a.p+"static/media/sun.e6daec73.png"},,,,,function(e,t,a){e.exports=a(20)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(2),l=a.n(o),r=(a(17),a(3)),i=a(4),c=a(9),u=a(11),d=(a(18),a(5)),m=a.n(d),h=a(6),f=a.n(h),p=a(7),g=a.n(p);var E=function(e){console.info("PlotMap",e);var t=[],a=function(e){return"northeast"===e?"rotate(0deg)":"east"===e?"rotate(45deg)":"southeast"===e?"rotate(90deg)":"south"===e?"rotate(135deg)":"southwest"===e?"rotate(180deg)":"west"===e?"rotate(225deg)":"northwest"===e?"rotate(270deg)":"north"===e?"rotate(315deg)":void 0},n=function(e,t){if("stars"===e.name)return s.a.createElement("img",{src:f.a,alt:"stars",style:{width:t+"vmin",height:t+"vmin"}});if("drone"===e.name){var n=e.direction.toString().toLowerCase();return s.a.createElement("img",{src:m.a,alt:"drone",style:{width:t+"vmin",height:t+"vmin",transform:a(n)}})}return"sun"===e.name?s.a.createElement("img",{src:g.a,alt:"sun",style:{width:t+"vmin",height:t+"vmin"}}):void 0},o=function(e){if("scanned"===e.state)return"lightgreen"},l=function(e){var t=" ("+e.y+", "+e.x+") ";return"drone"===e.name&&(t="d"+e.id+t,t+=e.direction.toUpperCase()),t};!function(){for(var a=0;a<e.mapHeight;a++){t.push([]);for(var n=0;n<e.mapWidth;n++)t[a][n]={x:a,y:n,name:"",state:"",direction:""}}!function(){for(var a=0;a<Object.keys(e.squares).length;a++){var n=e.squares[a],s=n.y,o=n.x;t[s][o]={x:s,y:o,name:n.name.toString().toLowerCase(),state:n.state.toString().toLowerCase(),id:"",direction:""}}}(),function(){for(var a=0;a<Object.keys(e.drones).length;a++){var n=e.drones[a],s=n.y,o=n.x;t[s][o]={x:s,y:o,name:"drone",id:n.id.toString(),direction:n.direction.toString().toLowerCase()}}}()}();var r=120/e.mapWidth;(120/e.mapWidth*e.mapHeight>90||e.mapHeight>=e.mapWidth)&&(r=90/e.mapHeight);for(var i=[],c=0,u=e.mapHeight-1;u>=0;u--){for(var d=0;d<e.mapWidth;d++){var h=t[u][d];c+=1,i.push(s.a.createElement("div",{className:"square tooltipped","data-position":"bottom","data-tooltip":l(h),key:c,style:{height:r+"vmin",width:r+"vmin",backgroundColor:o(h)}},n(h,.8*r)))}i.push(s.a.createElement("div",{key:Math.random(),className:"nextline"}," "))}return s.a.createElement("div",null,i)};var S=function(e){var t=e.show?"content":"hide";console.log("show",e.show,t);var a=e.mapWidth*e.mapHeight,n=e.drones.map((function(e){var t=e.crashed?"crashed":"alive";return s.a.createElement("tr",{key:e.id},s.a.createElement("td",null,"d",e.id," "),s.a.createElement("td",null,"(",e.x,",",e.y,")"),s.a.createElement("td",null,e.direction.toString().toLowerCase()),s.a.createElement("td",null,e.fuel),s.a.createElement("td",null,e.strategy),s.a.createElement("td",null,t))}));return s.a.createElement("div",{className:"report"},s.a.createElement("div",{className:"card-panel black radius center"},s.a.createElement("h5",null,"Report")),s.a.createElement("div",{className:t},s.a.createElement("p",null," Mode: ",e.mode," "),s.a.createElement("p",null," File: ",e.fileName),s.a.createElement("p",null," Width, Height: ",e.mapWidth," , ",e.mapHeight),s.a.createElement("p",null," Mapsize: ",a," "),s.a.createElement("p",null," MaxTurns: ",e.maxTurns," "),s.a.createElement("p",null," CurrentTurns: ",e.turns),s.a.createElement("p",null," ExplorableSquares: ",e.explorableSquares),s.a.createElement("p",null," ExploredSafeSquares: ",e.safeSquares),s.a.createElement("p",null," TotalDrones: ",e.totalDrones),s.a.createElement("p",null," ActiveDrones: ",e.drones.length),s.a.createElement("table",{className:"highlight"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"InitailFuel"),s.a.createElement("th",null,"RechangeFuel"),s.a.createElement("th",null,"MaxFuel"))),s.a.createElement("tbody",null,s.a.createElement("tr",{key:Math.random()},s.a.createElement("td",null,e.fuels[0]),s.a.createElement("td",null,e.fuels[1]),s.a.createElement("td",null,e.fuels[2])))),s.a.createElement("table",{className:"highlight"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"id"),s.a.createElement("th",null,"coord."),s.a.createElement("th",null,"direc."),s.a.createElement("th",null,"fuel"),s.a.createElement("th",null,"strategy"),s.a.createElement("th",null,"state"))),s.a.createElement("tbody",null,n))))},v=a(10);var w=function(e){console.log("Output",e);var t=s.a.createRef();Object(n.useEffect)((function(){t.current&&t.current.scrollIntoView({behavior:"smooth"})}),[t]);var a,o=e.show?"content":"hide",l=[],r=Object(v.a)(e.outputs);try{for(r.s();!(a=r.n()).done;){var i=a.value;l=l.concat(i)}}catch(u){r.e(u)}finally{r.f()}var c=l.map((function(e,a){return s.a.createElement("p",{key:a,ref:t},e)}));return s.a.createElement("div",{className:"output"},s.a.createElement("div",{className:"card-panel black radius center"},s.a.createElement("h5",null,"Outputs")),s.a.createElement("div",{className:o},c))};var N=function(e){console.info("Button",e);var t="<= please select a scenario file";e.fileName.endsWith(".csv")&&(t=e.mode+" mode with "+e.fileName);var a="waves-effect waves-light btn cyan darken-2 mleft-30 mtop-20 btn";return e.finalReport,s.a.createElement("div",{className:"button"},s.a.createElement("button",{className:"waves-effect waves-light btn cyan darken-2 mleft-30 mtop-20 btn tooltipped","data-position":"left","data-tooltip":t,onClick:e.handleStart,disabled:e.disabled},s.a.createElement("i",{className:"material-icons right"},"play_arrow"),"start"),s.a.createElement("button",{className:a,onClick:e.handleNext,disabled:!e.disabled||e.isStrat2||e.fastForward},s.a.createElement("i",{className:"material-icons right"},"skip_next"),"next"),s.a.createElement("button",{className:a,onClick:e.handleForward,disabled:!e.disabled||e.isStrat2||e.fastForward},s.a.createElement("i",{className:"material-icons right"},"forward"),"fastforward"),s.a.createElement("button",{className:a,onClick:e.handlePause,disabled:!e.disabled||e.isStrat2},s.a.createElement("i",{className:"material-icons right"},"pause"),"pause"),s.a.createElement("button",{className:a,onClick:e.handleStop,disabled:!e.disabled||e.isStrat2||e.fastForward},s.a.createElement("i",{className:"material-icons right"},"stop"),"stop"))};var b=function(e){console.log("sideMenu",e);var t=e.files.map((function(e,t){return s.a.createElement("option",{key:t,value:e},e)}));return s.a.createElement("div",{className:"side-menu"},s.a.createElement("button",{"data-target":"setting",className:"btn-floating pulse sidenav-trigger tooltipped","data-position":"right","data-tooltip":"menu",disabled:e.disabled},s.a.createElement("i",{className:"material-icons"},"menu")),s.a.createElement("div",{id:"setting",className:"sidenav",hidden:e.disabled},s.a.createElement("div",{className:"container mtop-40"},s.a.createElement("h4",null," star search "),s.a.createElement("h6",null," Please select mode:"),s.a.createElement("p",null,s.a.createElement("label",{className:"label"},s.a.createElement("input",{type:"radio",className:"with-gap",name:"setMode",value:"initial",onChange:e.handleMode,checked:"initial"===e.mode}),s.a.createElement("span",null,"Initial Mode"))),s.a.createElement("p",null,s.a.createElement("label",{className:"label"},s.a.createElement("input",{type:"radio",className:"with-gap",name:"setMode",value:"resume",onChange:e.handleMode,checked:"resume"===e.mode}),s.a.createElement("span",null,"Resume Mode"))),s.a.createElement("h6",null," Please select scenario file:"),s.a.createElement("select",{className:"browser-default",onChange:e.handleFile},s.a.createElement("option",{value:e.fileName},"Select Scenario File"),t))))};var y=function(e){return s.a.createElement("div",{id:"report",className:"middle",hidden:e.hideReport},s.a.createElement("div",{className:"card cyan darken-4"},s.a.createElement("div",{className:"card-content white-text left-align"},s.a.createElement("h6",{className:"card-title bold"},"Final Report"),s.a.createElement("p",null,"MapSize: ",e.finalReport.mapSize),s.a.createElement("p",null,"ExplorableSquares: ",e.finalReport.numOfExplorableSquares),s.a.createElement("p",null,"ExploredSafeSquares: ",e.finalReport.numOfExploredSafeSquares),s.a.createElement("p",null,"CompleteTurns: ",e.finalReport.completeTurns)),s.a.createElement("div",{className:"card-action right-align"},s.a.createElement("button",{className:"waves-effect waves-light btn white orange-text",onClick:e.handleClickOk},"OK"))))};var R=function(e){console.log("InputAction",e);var t=Array.from(Array(e.maxSteps),(function(e,t){return t+1}));console.log("steps "+t);var a="press GO to continue";(e.actionPair.endsWith("go")||""===e.actionPair)&&(a="Please choose an action");var n=["north","northeast","east","southeast","south","southwest","west","northwest"].map((function(e,t){var a="steer,"+e;return s.a.createElement("option",{key:"steer"+t,value:a},a)})),o=t.map((function(e,t){var a="thrust,"+e;return s.a.createElement("option",{key:"thrust"+t,value:a},a)}));return s.a.createElement("div",{className:"row action-go",hidden:!e.isStrat2},s.a.createElement("div",{className:"col 9 action"},s.a.createElement("select",{className:"browser-default",onChange:e.handleAction},s.a.createElement("option",{value:e.actionByUser},"Choose an action to go"),s.a.createElement("option",{value:"scan, "},"scan"),s.a.createElement("option",{value:"recharge, "},"recharge"),s.a.createElement("option",{value:"pass, "},"pass"),o,n)),s.a.createElement("div",{className:"col 2 mtop-5"},s.a.createElement("button",{className:"waves-effect waves-light btn yellow darken-3 pulse tooltipped","data-tooltip":a,onClick:e.handleClickGo},"Go")))},q=a(8),x=a.n(q),k=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).fetchInitData=function(){console.log("fetch file = "+n.state.fileName),console.log("currnet mode:"+n.state.mode),fetch("/starSearch/?fileName="+n.state.fileName+"&mode="+n.state.mode).then((function(e){return e.json()})).then((function(e){"undefined"===typeof e.squares&&alert("Please refresh browser"),n.setState({mapWidth:e.width,mapHeight:e.height,maxTurns:e.maxTurns,turns:e.turns,fuels:e.fuels,totalDrones:e.totalDrones,explorableSquares:e.explorableSquares,squares:e.squares,safeSquares:e.safeSquares,drones:e.drones,outputs:e.outputs,maxSteps:Math.max(e.width,e.height)}),console.log("Fetch InitData "),console.log("width, heigth = "+e.width+" "+e.height),console.log("maxTurns, turns, totalDrones = "+e.maxTurns+" "+e.turns+" "+e.totalDrones),console.log("explorableSquares = "+JSON.stringify(e.explorableSquares)),console.log("squares = "+JSON.stringify(e.squares)),console.log("safeSquares = "+JSON.stringify(e.safeSquares)),console.log("fuels = "+e.fuels),console.log("totalDrones"+e.totalDrones),console.log("drones = "+JSON.stringify(e.drones)),console.log("outputs = "+JSON.stringify(e.outputs)),console.log("finalReport = "+JSON.stringify(e.finalReport))})).catch((function(e){console.log("err",e)}))},n.fetchFiles=function(){console.log("fetch files"),console.log("currnet mode:"+n.state.mode),fetch("/files?fileName="+n.state.fileName).then((function(e){return e.json()})).then((function(e){n.setState({filesToResume:e.filesToResume,filesToInitial:e.filesToInitial,files:"initial"===n.state.mode?e.filesToInitial:e.filesToResume}),console.log("filesToResume = "+JSON.stringify(e.filesToResume)),console.log("filesToInitial = "+JSON.stringify(e.filesToInitial))})).catch((function(e){console.log("err",e)}))},n.fetchStrat=function(){console.log("fetch drone strategy"),fetch("/getStrat").then((function(e){return e.json()})).then((function(e){2===e.strat?(console.log("strategy 2"),n.setState({isStrat2:!0})):(console.log("strategy 0 or 1"),n.fetchUpdates()),console.log("strat = "+e.strat)})).catch((function(e){console.log("err",e)}))},n.fetchUpdates=function(){fetch("/nextAction").then((function(e){return e.json()})).then((function(e){"undefined"!==typeof e.squares?(console.log(e),console.log("Fetch updates"),console.log("turns = "+JSON.stringify(e.turns)),console.log("squares = "+JSON.stringify(e.squares)),console.log("safeSquares = "+JSON.stringify(e.safeSquares)),console.log("drones = "+JSON.stringify(e.drones)),console.log("outputs = "+JSON.stringify(e.outputs)),console.log("finalReport = "+JSON.stringify(e.finalReport)),n.setState({squares:e.squares,safeSquares:e.safeSquares,drones:e.drones,turns:e.turns,outputs:e.outputs,finalReport:e.finalReport,disabled:""===e.finalReport?"yes":"",hideReport:""===e.finalReport}),n.state.fastForward&&""===e.finalReport?(console.log("keeping update"),n.forward=setTimeout(n.fetchStrat,500)):n.forward=null,""!==e.finalReport&&n.fetchFiles()):alert("Please refresh browser")})).catch((function(e){console.log("err",e)}))},n.fetchUpdatesByUser=function(){var e=n.state.actionPair.split(",")[0],t=n.state.actionPair.split(",")[1];console.log("fetch (action, param) = ("+e+","+t+")"),fetch("/nextActionByUser/?action="+e+"&param="+t).then((function(e){return e.json()})).then((function(e){"undefined"===typeof e.squares&&alert("Please refresh browser"),console.log(e),console.log("Fetch updates by user"),console.log("turns = "+JSON.stringify(e.turns)),console.log("squares = "+JSON.stringify(e.squares)),console.log("safeSquares = "+JSON.stringify(e.safeSquares)),console.log("drones = "+JSON.stringify(e.drones)),console.log("outputs = "+JSON.stringify(e.outputs)),console.log("finalReport = "+JSON.stringify(e.finalReport)),n.setState({squares:e.squares,safeSquares:e.safeSquares,drones:e.drones,turns:e.turns,outputs:e.outputs,finalReport:e.finalReport,disabled:""===e.finalReport?"yes":"",hideReport:""===e.finalReport,isStrat2:!1}),n.state.fastForward&&""===e.finalReport?(console.log("keeping update"),n.forward=setTimeout(n.fetchStrat,500)):n.forward=null,""!==e.finalReport&&n.fetchFiles()})).catch((function(e){console.log("err",e)}))},n.fetchReport=function(){fetch("/stop").then((function(e){return e.json()})).then((function(e){console.log(e),console.log("stop to fetch report"),console.log("finalReport = "+JSON.stringify(e.finalReport)),n.setState({finalReport:e.finalReport,hideReport:!1})})).catch((function(e){console.log("err",e)}))},n.handleStart=function(e){n.state.fileName.endsWith(".csv")?(console.log("press START..."),n.fetchInitData(),n.setState({disabled:!0,show:!0})):e.preventDefault()},n.handleNext=function(){console.log("press NEXT..."),n.setState({fastForward:!1}),n.fetchStrat()},n.handleForward=function(e){console.log("press FORWARD..."),n.setState({fastForward:!0}),n.fetchStrat()},n.handlePause=function(e){console.log("press PAUSE..."),n.setState({fastForward:!1})},n.handleStop=function(e){console.log("press STOP..."),null!==n.forward&&clearTimeout(n.forward),setTimeout((function(){n.fetchReport(),n.fetchFiles(),n.setState({fastForward:!1}),n.forward=null}),500)},n.handleFile=function(e){n.reset(),n.setState({fileName:e.target.value}),console.log("select file..."),console.log("fileName: "+e.target.value)},n.handleMode=function(e){n.reset(),n.setState({mode:e.target.value,files:"initial"===e.target.value?n.state.filesToInitial:n.state.filesToResume}),console.log("choose mode..."),console.log("mode = "+e.target.value),console.log("files = "+n.state.files)},n.handleClickOk=function(){n.setState({hideReport:!0}),n.reset()},n.handleAction=function(e){n.setState({actionPair:e.target.value}),console.log("select action..."),console.log("actionPair: "+e.target.value)},n.handleClickGo=function(e){console.log("clickGo "+e.target.value),n.state.actionPair.endsWith("go")||""===n.state.actionPair?(console.log("includes go"+e.target.value),e.preventDefault()):n.fetchUpdatesByUser()},n.reset=function(){n.setState({mapWidth:20,mapHeight:15,maxTurns:100,turns:0,fuels:[],explorableSquares:0,squares:[],totalDrones:0,drones:[],outputs:[],finalReport:"",disabled:!1,show:!1,isStrat2:!1,hideReport:!0,actionPair:"",maxSteps:0,fastForward:!1})},n.componentDidMount=function(){x.a.AutoInit(),n.fetchFiles()},n.state={files:[],filesToResume:[],fileToInitial:[],fileName:"",mode:"initial",mapWidth:20,mapHeight:15,maxTurns:0,turns:0,fuels:[],explorableSquares:0,squares:[],safeSquares:0,totalDrones:0,drones:[],outputs:[],finalReport:"",disabled:!1,show:!1,isStrat2:!1,hideReport:!0,actionPair:"",maxSteps:0,fastForward:!1},n.forward=null,n}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"simulator"},s.a.createElement(b,{mode:this.state.mode,handleMode:this.handleMode,disabled:this.state.disabled,files:this.state.files,handleFile:this.handleFile}),s.a.createElement(w,{show:this.state.show,outputs:this.state.outputs}),s.a.createElement(S,{fileName:this.state.fileName,mode:this.state.mode,mapWidth:this.state.mapWidth,mapHeight:this.state.mapHeight,maxTurns:this.state.maxTurns,squares:this.state.squares,totalDrones:this.state.totalDrones,drones:this.state.drones,show:this.state.show,turns:this.state.turns,fuels:this.state.fuels,safeSquares:this.state.safeSquares,explorableSquares:this.state.explorableSquares}),s.a.createElement(N,{disabled:this.state.disabled,handleStart:this.handleStart,handleNext:this.handleNext,handleForward:this.handleForward,handlePause:this.handlePause,handleStop:this.handleStop,fileName:this.state.fileName,mode:this.state.mode,finalReport:this.state.finalReport,isStrat2:this.state.isStrat2,fastForward:this.state.fastForward}),s.a.createElement(E,{mapWidth:this.state.mapWidth,mapHeight:this.state.mapHeight,squares:this.state.squares,drones:this.state.drones}),s.a.createElement(y,{finalReport:this.state.finalReport,hideReport:this.state.hideReport,handleClickOk:this.handleClickOk}),s.a.createElement(R,{isStrat2:this.state.isStrat2,maxSteps:this.state.maxSteps,actionPair:this.state.actionPair,handleAction:this.handleAction,handleClickGo:this.handleClickGo})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[12,1,2]]]);
//# sourceMappingURL=main.5530b288.chunk.js.map